<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: Commandable</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./lib/commandable/app_controller_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/commandable/app_controller.rb">lib/commandable/app_controller.rb</a></li>
					
						<li><a href="./lib/commandable/commandable_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/commandable/commandable.rb">lib/commandable/commandable.rb</a></li>
					
						<li><a href="./lib/commandable/exceptions_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/commandable/exceptions.rb">lib/commandable/exceptions.rb</a></li>
					
						<li><a href="./lib/commandable/version_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/commandable/version.rb">lib/commandable/version.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">CLASS</span> <a href="Commandable/AccessorError.html">Commandable::AccessorError</a></li>
					
					<li><span class="type">CLASS</span> <a href="Commandable/AppController.html">Commandable::AppController</a></li>
					
					<li><span class="type">CLASS</span> <a href="Commandable/ConfigurationError.html">Commandable::ConfigurationError</a></li>
					
					<li><span class="type">CLASS</span> <a href="Commandable/MissingRequiredCommandError.html">Commandable::MissingRequiredCommandError</a></li>
					
					<li><span class="type">CLASS</span> <a href="Commandable/SyntaxError.html">Commandable::SyntaxError</a></li>
					
					<li><span class="type">CLASS</span> <a href="Commandable/UnknownCommandError.html">Commandable::UnknownCommandError</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-%5B%5D">::[]</a></li>
					
					<li><a href="#method-c-clear_commands">::clear_commands</a></li>
					
					<li><a href="#method-c-commands">::commands</a></li>
					
					<li><a href="#method-c-each">::each</a></li>
					
					<li><a href="#method-c-execute">::execute</a></li>
					
					<li><a href="#method-c-execution_queue">::execution_queue</a></li>
					
					<li><a href="#method-c-help">::help</a></li>
					
					<li><a href="#method-c-reset_all">::reset_all</a></li>
					
					<li><a href="#method-c-reset_colors">::reset_colors</a></li>
					
					<li><a href="#method-c-set_colors">::set_colors</a></li>
					
					<li><a href="#method-i-add_command">#add_command</a></li>
					
					<li><a href="#method-i-command">#command</a></li>
					
					<li><a href="#method-i-method_added">#method_added</a></li>
					
					<li><a href="#method-i-parse_arguments">#parse_arguments</a></li>
					
					<li><a href="#method-i-parse_optional">#parse_optional</a></li>
					
					<li><a href="#method-i-readline">#readline</a></li>
					
					<li><a href="#method-i-singleton_method_added">#singleton_method_added</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
			<div id="includes-section" class="section">
				<h3 class="section-header">Included Modules</h3>
				<ul class="link-list">
				
				
					<li><a class="include" href="Commandable.html">Commandable</a></li>
				
				
				</ul>
			</div>
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./Commandable.html">Commandable</a></li>
				
					<li><a href="./Commandable/AccessorError.html">Commandable::AccessorError</a></li>
				
					<li><a href="./Commandable/AppController.html">Commandable::AppController</a></li>
				
					<li><a href="./Commandable/ConfigurationError.html">Commandable::ConfigurationError</a></li>
				
					<li><a href="./Commandable/MissingRequiredCommandError.html">Commandable::MissingRequiredCommandError</a></li>
				
					<li><a href="./Commandable/SyntaxError.html">Commandable::SyntaxError</a></li>
				
					<li><a href="./Commandable/UnknownCommandError.html">Commandable::UnknownCommandError</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Commandable</h1>

		<div id="description">
			<p>
Extending your class with this module allows you to use the <a
href="Commandable.html#method-i-command">#</a> method above your method.
This makes them executable from the command line.
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="HELP_COMMAND">HELP_COMMAND</a></dt>
				
				<dd class="description"><p>
Default command that always gets added to end of the command list
</p></dd>
				
			
				<dt><a name="VERSION">VERSION</a></dt>
				
				<dd class="description"><p>
The application&#8217;s version number
</p></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		
		<div id="attribute-method-details" class="method-section section">
			<h3 class="section-header">Attributes</h3>

			
			<div id="app-info-attribute-method" class="method-detail">
				<a name="app_info"></a>
				
				<a name="app_info="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">app_info</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
Describes your application, printed at the top of help/usage messages
</p>
				
				</div>
			</div>
			
			<div id="app-name-attribute-method" class="method-detail">
				<a name="app_name"></a>
				
				<a name="app_name="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">app_name</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
Used when building the usage line, e.g. Usage: <a
href="Commandable.html#app_name">app_name</a> [command] [parameters]
</p>
				
				</div>
			</div>
			
			<div id="verbose-parameters-attribute-method" class="method-detail">
				<a name="verbose_parameters"></a>
				
				<a name="verbose_parameters="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">verbose_parameters</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
If optional parameters show default values, true by default
</p>
				
				</div>
			</div>
			
			<div id="color-output-attribute-method" class="method-detail">
				<a name="color_output"></a>
				
				<a name="color_output="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_output</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
Boolean: If help/usage messages will print in color
</p>
				
				</div>
			</div>
			
			<div id="color-app-info-attribute-method" class="method-detail">
				<a name="color_app_info"></a>
				
				<a name="color_app_info="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_app_info</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the <a href="Commandable.html#app_info">app_info</a> text will
be in the help message
</p>
				
				</div>
			</div>
			
			<div id="color-app-name-attribute-method" class="method-detail">
				<a name="color_app_name"></a>
				
				<a name="color_app_name="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_app_name</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the <a href="Commandable.html#app_name">app_name</a> will be in
the usage line in the help message
</p>
				
				</div>
			</div>
			
			<div id="color-command-attribute-method" class="method-detail">
				<a name="color_command"></a>
				
				<a name="color_command="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_command</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the word &#8220;command&#8221; and the commands themselves will
be in the help message
</p>
				
				</div>
			</div>
			
			<div id="color-description-attribute-method" class="method-detail">
				<a name="color_description"></a>
				
				<a name="color_description="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_description</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the description column header and text will be in the help
message
</p>
				
				</div>
			</div>
			
			<div id="color-parameter-attribute-method" class="method-detail">
				<a name="color_parameter"></a>
				
				<a name="color_parameter="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_parameter</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the word &#8220;parameter&#8221; and the parameters themselves
will be in the help message
</p>
				
				</div>
			</div>
			
			<div id="color-usage-attribute-method" class="method-detail">
				<a name="color_usage"></a>
				
				<a name="color_usage="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_usage</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the word &#8220;Usage:&#8221; will be in the help message
</p>
				
				</div>
			</div>
			
			<div id="color-error-word-attribute-method" class="method-detail">
				<a name="color_error_word"></a>
				
				<a name="color_error_word="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_error_word</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the word &#8220;Error:&#8221; text will be in error messages
</p>
				
				</div>
			</div>
			
			<div id="color-error-name-attribute-method" class="method-detail">
				<a name="color_error_name"></a>
				
				<a name="color_error_name="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_error_name</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the friendly name of the error will be in error messages
</p>
				
				</div>
			</div>
			
			<div id="color-error-description-attribute-method" class="method-detail">
				<a name="color_error_description"></a>
				
				<a name="color_error_description="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">color_error_description</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				<p>
What color the error description will be in error messages
</p>
				
				</div>
			</div>
			
		</div>
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="--method" class="method-detail ">
				<a name="method-c-%5B%5D"></a>

				<div class="method-heading">
				
					<span class="method-name">[]</span><span
						class="method-args">(index)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Access the command array using the method name (symbol or string)
</p>
					

					
					<div class="method-source-code"
						id="--source">
<pre>
    <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 56</span>
56:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">index</span>)
57:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">AccessorError</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">index</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Symbol</span>
58:       <span class="ruby-identifier">@@commands</span>[<span class="ruby-identifier">index</span>.<span class="ruby-identifier">to_sym</span>]
59:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="clear-commands-method" class="method-detail ">
				<a name="method-c-clear_commands"></a>

				<div class="method-heading">
				
					<span class="method-name">clear_commands</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Clears all methods from the list of available commands This is mostly
useful for testing.
</p>
					

					
					<div class="method-source-code"
						id="clear-commands-source">
<pre>
    <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 75</span>
75:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_commands</span>
76:       <span class="ruby-identifier">@@commands</span> = <span class="ruby-constant">HELP_COMMAND</span>.<span class="ruby-identifier">dup</span>
77:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="commands-method" class="method-detail ">
				<a name="method-c-commands"></a>

				<div class="method-heading">
				
					<span class="method-name">commands</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
An array of methods that can be executed from the command line
</p>
					

					
					<div class="method-source-code"
						id="commands-source">
<pre>
    <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 51</span>
51:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">commands</span>
52:       <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">dup</span>
53:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="each-method" class="method-detail ">
				<a name="method-c-each"></a>

				<div class="method-heading">
				
					<span class="method-name">each</span><span
						class="method-args">(&block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Convenience method to iterate over the array of commands using the <a
href="Commandable.html">Commandable</a> module
</p>
					

					
					<div class="method-source-code"
						id="each-source">
<pre>
    <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 80</span>
80:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each</span>(&amp;<span class="ruby-identifier">block</span>)
81:       <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
82:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>
83:       <span class="ruby-keyword kw">end</span>
84:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="execute-method" class="method-detail ">
				<a name="method-c-execute"></a>

				<div class="method-heading">
				
					<span class="method-name">execute</span><span
						class="method-args">(argv)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
A wrapper for the <a
href="Commandable.html#method-c-execution_queue">execution_queue</a> that
runs the queue and traps errors.  If an error occurs inside this method it
will print out a complete. of availavle methods with usage instructios and
exit gracefully.
</p>
					

					
					<div class="method-source-code"
						id="execute-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 114</span>
114:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">argv</span>)
115:       <span class="ruby-keyword kw">begin</span>
116:         <span class="ruby-identifier">command_array</span> = <span class="ruby-identifier">execution_queue</span>(<span class="ruby-identifier">argv</span>)
117:         <span class="ruby-identifier">command_array</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">com</span><span class="ruby-operator">|</span>
118:           <span class="ruby-identifier">puts</span> <span class="ruby-identifier">com</span>[<span class="ruby-value">:proc</span>].<span class="ruby-identifier">call</span>
119:         <span class="ruby-keyword kw">end</span>
120:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">exception</span>
121:         <span class="ruby-identifier">set_colors</span>
122:         <span class="ruby-identifier">puts</span> <span class="ruby-identifier">help</span>(<span class="ruby-node">&quot;\n  #{@c_error_word}Error:#{@c_reset} #{@c_error_name}#{exception.friendly_name}#{@c_reset}\n  #{@c_error_description}#{exception.message}#{@c_reset}\n\n&quot;</span>)
123:       <span class="ruby-keyword kw">end</span>
124:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="execution-queue-method" class="method-detail ">
				<a name="method-c-execution_queue"></a>

				<div class="method-heading">
				
					<span class="method-name">execution_queue</span><span
						class="method-args">(argv)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns an array of executable procs based on the given array of commands
and parameters Normally this would come from the command line parameters in
the ARGV array.
</p>
					

					
					<div class="method-source-code"
						id="execution-queue-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 128</span>
128:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execution_queue</span>(<span class="ruby-identifier">argv</span>)
129:       <span class="ruby-identifier">arguments</span> = <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">dup</span>
130:       <span class="ruby-identifier">method_hash</span> = {}
131:       <span class="ruby-identifier">last_method</span> = <span class="ruby-keyword kw">nil</span>
132:       
133:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">empty?</span>
134:         <span class="ruby-identifier">arguments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">@@default_method</span>.<span class="ruby-identifier">keys</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@default_method</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">@@default_method</span>.<span class="ruby-identifier">values</span>[<span class="ruby-value">0</span>][<span class="ruby-value">:parameters</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:req</span>)
135:       <span class="ruby-keyword kw">end</span>
136:       <span class="ruby-identifier">arguments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;help&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">empty?</span>
137:       
138:       <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
139:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Commandable</span>[<span class="ruby-identifier">arg</span>]
140:           <span class="ruby-identifier">last_method</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_sym</span>
141:           <span class="ruby-identifier">method_hash</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">last_method</span>=<span class="ruby-operator">&gt;</span>[])
142:         <span class="ruby-keyword kw">else</span>
143:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">last_method</span>
144:             <span class="ruby-identifier">default</span> = <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">value</span>[<span class="ruby-value">:default</span>]}
145:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">UnknownCommandError</span>, <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">empty?</span>
146:             <span class="ruby-identifier">last_method</span> = <span class="ruby-identifier">default</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">first</span>
147:             <span class="ruby-identifier">method_hash</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">last_method</span>=<span class="ruby-operator">&gt;</span>[])
148:           <span class="ruby-keyword kw">end</span>
149:           <span class="ruby-identifier">method_hash</span>[<span class="ruby-identifier">last_method</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">arg</span>
150:         <span class="ruby-keyword kw">end</span>
151:         <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">select</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> 
152:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">MissingRequiredCommandError</span>, <span class="ruby-identifier">key</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>[<span class="ruby-value">:required</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">method_hash</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">nil?</span>
153:         <span class="ruby-keyword kw">end</span>
154:       <span class="ruby-keyword kw">end</span>
155: 
156:       <span class="ruby-identifier">proc_array</span> = []
157:       <span class="ruby-identifier">method_hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">meth</span>, <span class="ruby-identifier">params</span><span class="ruby-operator">|</span>
158:         <span class="ruby-identifier">command</span> = <span class="ruby-identifier">@@commands</span>[<span class="ruby-identifier">meth</span>]
159:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Object</span>
160:         <span class="ruby-identifier">command</span>[<span class="ruby-value">:class</span>].<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/::/</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">name</span>) }
161:         <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">command</span>[<span class="ruby-value">:class_method</span>]
162:         <span class="ruby-identifier">proc_array</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:method=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">meth</span>, <span class="ruby-value">:parameters=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">params</span>, <span class="ruby-value">:priority=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">@@cmd_parameters</span>[<span class="ruby-value">:priority</span>], <span class="ruby-value">:proc=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">lambda</span>{<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">meth</span>, *<span class="ruby-identifier">params</span>)}}
163:       <span class="ruby-keyword kw">end</span>
164:       <span class="ruby-identifier">proc_array</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>[<span class="ruby-value">:priority</span>] <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">:priority</span>]}.<span class="ruby-identifier">reverse</span>
165:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="help-method" class="method-detail ">
				<a name="method-c-help"></a>

				<div class="method-heading">
				
					<span class="method-name">help</span><span
						class="method-args">(additional_info=nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Generates an array of the available commands with a list of their
parameters and the method&#8217;s description. This includes the
applicaiton info and app name if given. It&#8217;s meant to be printed to
the command line.
</p>
					

					
					<div class="method-source-code"
						id="help-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 90</span>
 90:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>(<span class="ruby-identifier">additional_info</span>=<span class="ruby-keyword kw">nil</span>)
 91:       
 92:       <span class="ruby-identifier">set_colors</span>
 93:       <span class="ruby-identifier">array</span> =  [<span class="ruby-node">&quot;  #{@c_usage}Usage:#{@c_reset} #{@c_app_name + app_name + @c_reset + &quot; &lt;#{@c_command + @c_bold}command#{@c_reset}&gt; [#{@c_parameter + @c_bold}parameters#{@c_reset}] [&lt;#{@c_command + @c_bold}command#{@c_reset}&gt; [#{@c_parameter + @c_bold}parameters#{@c_reset}]...]&quot; if Commandable.app_name}&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>]
 94:       <span class="ruby-identifier">array</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-identifier">additional_info</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">additional_info</span>
 95:       <span class="ruby-identifier">array</span>.<span class="ruby-identifier">unshift</span> (<span class="ruby-value str">&quot;\e[2A&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@c_app_info</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Commandable</span>.<span class="ruby-identifier">app_info</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@c_reset</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Commandable</span>.<span class="ruby-identifier">app_info</span>
 96:       <span class="ruby-identifier">array</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-value str">&quot;\e[H\e[2J&quot;</span>
 97:       
 98:       <span class="ruby-identifier">cmd_length</span> = <span class="ruby-value str">&quot;Command&quot;</span>.<span class="ruby-identifier">length</span>
 99:       <span class="ruby-identifier">parm_length</span> = <span class="ruby-value str">&quot;Parameter(s)&quot;</span>.<span class="ruby-identifier">length</span>
100:       <span class="ruby-identifier">max_command</span> = [(<span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">max_by</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> }).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">cmd_length</span>].<span class="ruby-identifier">max</span>
101:       <span class="ruby-identifier">max_parameter</span> = [<span class="ruby-identifier">@@commands</span>[<span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">max_by</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">@@commands</span>[<span class="ruby-identifier">key</span>][<span class="ruby-value">:argument_list</span>].<span class="ruby-identifier">length</span> }][<span class="ruby-value">:argument_list</span>].<span class="ruby-identifier">length</span>, <span class="ruby-identifier">parm_length</span>].<span class="ruby-identifier">max</span>
102:       
103:       <span class="ruby-identifier">array</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{&quot; &quot;*(max_command-cmd_length)}#{@c_command + @c_bold}Command#{@c_reset} #{@c_parameter + @c_bold}Parameter(s) #{@c_reset}#{&quot; &quot;*(max_parameter-parm_length)}#{@c_description + @c_bold}Description#{@c_reset}&quot;</span>
104:       <span class="ruby-identifier">array</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
105:         <span class="ruby-identifier">default</span> = (<span class="ruby-identifier">@@default_method</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">@@default_method</span>.<span class="ruby-identifier">keys</span>[<span class="ruby-value">0</span>]) <span class="ruby-operator">?</span> <span class="ruby-ivar">@color_bold</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>
106:         <span class="ruby-node">&quot; #{&quot; &quot;*(max_command-key.length)}#{@c_command + default + key.to_s + @c_reset} #{default + @c_parameter + @@commands[key][:argument_list] + @c_reset}#{&quot; &quot;*(max_parameter-@@commands[key][:argument_list].length)} : #{default + @c_description}#{@@commands[key][:description]}#{&quot; (default)&quot; unless default == &quot;&quot;}#{@c_reset}&quot;</span> 
107:       <span class="ruby-keyword kw">end</span>
108:       <span class="ruby-identifier">array</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">nil</span>
109:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reset-all-method" class="method-detail ">
				<a name="method-c-reset_all"></a>

				<div class="method-heading">
				
					<span class="method-name">reset_all</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Resets the class to default values clearing any commands and setting the
color back to their default values.
</p>
					

					
					<div class="method-source-code"
						id="reset-all-source">
<pre>
    <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 63</span>
63:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_all</span>
64:       <span class="ruby-identifier">clear_commands</span>
65:       <span class="ruby-identifier">reset_colors</span>
66:       <span class="ruby-ivar">@app_info</span> = <span class="ruby-keyword kw">nil</span>
67:       <span class="ruby-ivar">@app_name</span> = <span class="ruby-keyword kw">nil</span>
68:       <span class="ruby-ivar">@verbose_parameters</span> = <span class="ruby-keyword kw">true</span>
69:       <span class="ruby-identifier">@@default_method</span> = <span class="ruby-keyword kw">nil</span>
70:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reset-colors-method" class="method-detail ">
				<a name="method-c-reset_colors"></a>

				<div class="method-heading">
				
					<span class="method-name">reset_colors</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Set colors to their default values
</p>
					

					
					<div class="method-source-code"
						id="reset-colors-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 168</span>
168:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_colors</span>
169:       <span class="ruby-comment cmt"># Colors - off by default</span>
170:       <span class="ruby-ivar">@color_output</span>      <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">false</span>
171:       <span class="ruby-comment cmt"># Build the default colors</span>
172:       <span class="ruby-constant">Term</span><span class="ruby-operator">::</span><span class="ruby-constant">ANSIColor</span>.<span class="ruby-identifier">coloring</span> = <span class="ruby-keyword kw">true</span>
173:       <span class="ruby-identifier">c</span> = <span class="ruby-constant">Term</span><span class="ruby-operator">::</span><span class="ruby-constant">ANSIColor</span>
174:       <span class="ruby-ivar">@color_app_info</span>           = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_white</span>  <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
175:       <span class="ruby-ivar">@color_app_name</span>           = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_green</span>  <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
176:       <span class="ruby-ivar">@color_command</span>            = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_yellow</span>
177:       <span class="ruby-ivar">@color_description</span>        = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_white</span>
178:       <span class="ruby-ivar">@color_parameter</span>          = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_cyan</span>
179:       <span class="ruby-ivar">@color_usage</span>              = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_black</span>   <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
180:       
181:       <span class="ruby-ivar">@color_error_word</span>         = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_black</span>   <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
182:       <span class="ruby-ivar">@color_error_name</span>         = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_red</span>     <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
183:       <span class="ruby-ivar">@color_error_description</span>  = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">intense_white</span>   <span class="ruby-operator">+</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
184:       
185:       <span class="ruby-ivar">@color_bold</span>               = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">bold</span>
186:       <span class="ruby-ivar">@color_reset</span>              = <span class="ruby-identifier">c</span>.<span class="ruby-identifier">reset</span>
187:       <span class="ruby-ivar">@screen_clear</span>             = <span class="ruby-value str">&quot;\e[H\e[2J&quot;</span>
188:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-class-method-details" class="method-section section">
			<h3 class="section-header">Private Class Methods</h3>

		
			<div id="set-colors-method" class="method-detail ">
				<a name="method-c-set_colors"></a>

				<div class="method-heading">
				
					<span class="method-name">set_colors</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Changes the colors used when print the help/usage instructions to those set
by the user.
</p>
					

					
					<div class="method-source-code"
						id="set-colors-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 193</span>
193:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_colors</span>
194:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">color_output</span>
195:         <span class="ruby-ivar">@c_app_info</span>           = <span class="ruby-ivar">@color_app_info</span>
196:         <span class="ruby-ivar">@c_app_name</span>           = <span class="ruby-ivar">@color_app_name</span>
197:         <span class="ruby-ivar">@c_command</span>            = <span class="ruby-ivar">@color_command</span>
198:         <span class="ruby-ivar">@c_description</span>        = <span class="ruby-ivar">@color_description</span>
199:         <span class="ruby-ivar">@c_parameter</span>          = <span class="ruby-ivar">@color_parameter</span>
200:         <span class="ruby-ivar">@c_usage</span>              = <span class="ruby-ivar">@color_usage</span>
201:         
202:         <span class="ruby-ivar">@c_error_word</span>         = <span class="ruby-ivar">@color_error_word</span>
203:         <span class="ruby-ivar">@c_error_name</span>         = <span class="ruby-ivar">@color_error_name</span>
204:         <span class="ruby-ivar">@c_error_description</span>  = <span class="ruby-ivar">@color_error_description</span>
205:         
206:         <span class="ruby-ivar">@c_bold</span>               = <span class="ruby-ivar">@color_bold</span>
207:         <span class="ruby-ivar">@c_reset</span>              = <span class="ruby-ivar">@color_reset</span>
208:       <span class="ruby-keyword kw">else</span>
209:         <span class="ruby-ivar">@c_app_info</span>, <span class="ruby-ivar">@c_app_name</span>, <span class="ruby-ivar">@c_command</span>, <span class="ruby-ivar">@c_description</span>,
210:         <span class="ruby-ivar">@c_parameter</span>, <span class="ruby-ivar">@c_usage</span>, <span class="ruby-ivar">@c_bold</span>, <span class="ruby-ivar">@c_reset</span>, <span class="ruby-ivar">@c_error_word</span>,
211:         <span class="ruby-ivar">@c_error_name</span>, <span class="ruby-ivar">@c_error_description</span> = [<span class="ruby-value str">&quot;&quot;</span>]*<span class="ruby-value">12</span>
212:       <span class="ruby-keyword kw">end</span>
213:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="add-command-method" class="method-detail ">
				<a name="method-i-add_command"></a>

				<div class="method-heading">
				
					<span class="method-name">add_command</span><span
						class="method-args">(meth)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Add a method to the list of available command line methods
</p>
					

					
					<div class="method-source-code"
						id="add-command-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 264</span>
264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_command</span>(<span class="ruby-identifier">meth</span>)
265:     <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:help</span>)
266:     <span class="ruby-identifier">argument_list</span> = <span class="ruby-identifier">parse_arguments</span>(<span class="ruby-identifier">@@cmd_parameters</span>[<span class="ruby-value">:parameters</span>])
267:     <span class="ruby-identifier">@@cmd_parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:argument_list=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">argument_list</span>,<span class="ruby-value">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>)
268:     <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">meth</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">@@cmd_parameters</span>)
269:     <span class="ruby-identifier">@@default_method</span> = {<span class="ruby-identifier">meth</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">@@cmd_parameters</span>} <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@cmd_parameters</span>[<span class="ruby-value">:default</span>]
270:     <span class="ruby-identifier">@@commands</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-constant">HELP_COMMAND</span>.<span class="ruby-identifier">dup</span>) <span class="ruby-comment cmt"># make sure the help command is always last</span>
271:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="command-method" class="method-detail ">
				<a name="method-i-command"></a>

				<div class="method-heading">
				
					<span class="method-name">command</span><span
						class="method-args">(*cmd_parameters)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Add a method to the list of command line methods
</p>
					

					
					<div class="method-source-code"
						id="command-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">command</span>(*<span class="ruby-identifier">cmd_parameters</span>)
222: 
223:     <span class="ruby-identifier">@@method_file</span> = <span class="ruby-keyword kw">nil</span>
224:     <span class="ruby-identifier">@@method_line</span> = <span class="ruby-keyword kw">nil</span>
225:     <span class="ruby-identifier">@@cmd_parameters</span> = {}
226:     
227:     <span class="ruby-comment cmt"># Include Commandable in singleton classes so class level methods work</span>
228:     <span class="ruby-identifier">include</span> <span class="ruby-constant">Commandable</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">include?</span> <span class="ruby-constant">Commandable</span>
229:     
230:     <span class="ruby-comment cmt"># parse command parameters</span>
231:     <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">param</span> = <span class="ruby-identifier">cmd_parameters</span>.<span class="ruby-identifier">shift</span>)
232:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">param</span>
233:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Symbol</span>
234:           <span class="ruby-identifier">@@cmd_parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">param</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">true</span>)
235:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
236:           <span class="ruby-identifier">@@cmd_parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">param</span>)
237:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
238:           <span class="ruby-identifier">@@cmd_parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:description=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">param</span>)
239:       <span class="ruby-keyword kw">end</span>
240:     <span class="ruby-keyword kw">end</span>
241:     <span class="ruby-identifier">@@cmd_parameters</span>[<span class="ruby-value">:priority</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
242:     
243:     <span class="ruby-comment cmt"># only one default allowed</span>
244:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ConfigurationError</span>, <span class="ruby-value str">&quot;Only one default method is allowed.&quot;</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@default_method</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">@@cmd_parameters</span>[<span class="ruby-value">:default</span>]
245:     
246:     <span class="ruby-identifier">set_trace_func</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">event</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">classname</span><span class="ruby-operator">|</span>
247: 
248:       <span class="ruby-comment cmt"># Traps the line where the method is defined so we can look up </span>
249:       <span class="ruby-comment cmt"># the method source code later if there are optional parameters</span>
250:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">event</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;line&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">@@method_file</span>
251:         <span class="ruby-identifier">@@method_file</span> = <span class="ruby-identifier">file</span>
252:         <span class="ruby-identifier">@@method_line</span> = <span class="ruby-identifier">line</span>
253:       <span class="ruby-keyword kw">end</span>
254:  
255:       <span class="ruby-comment cmt"># Raise an error if there is no method following a command definition</span>
256:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">event</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;end&quot;</span>
257:         <span class="ruby-identifier">set_trace_func</span>(<span class="ruby-keyword kw">nil</span>)
258:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">SyntaxError</span>, <span class="ruby-value str">&quot;A command was specified but no method follows&quot;</span>
259:       <span class="ruby-keyword kw">end</span>
260:     }
261:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="method-added-method" class="method-detail ">
				<a name="method-i-method_added"></a>

				<div class="method-heading">
				
					<span class="method-name">method_added</span><span
						class="method-args">(meth)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Trap method creation after a command call 
</p>
					

					
					<div class="method-source-code"
						id="method-added-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 274</span>
274:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_added</span>(<span class="ruby-identifier">meth</span>)
275:     <span class="ruby-identifier">set_trace_func</span>(<span class="ruby-keyword kw">nil</span>)
276:     <span class="ruby-identifier">@@cmd_parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:parameters=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">instance_method</span>(<span class="ruby-identifier">meth</span>).<span class="ruby-identifier">parameters</span>,<span class="ruby-value">:class_method=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>)
277:     <span class="ruby-identifier">add_command</span>(<span class="ruby-identifier">meth</span>)
278:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-arguments-method" class="method-detail ">
				<a name="method-i-parse_arguments"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_arguments</span><span
						class="method-args">(parameters)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parse a method&#8217;s parameters building the argument list for printing
help/usage
</p>
					

					
					<div class="method-source-code"
						id="parse-arguments-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 288</span>
288:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_arguments</span>(<span class="ruby-identifier">parameters</span>)
289:     <span class="ruby-identifier">parameter_string</span> = <span class="ruby-value str">&quot;&quot;</span>
290:     <span class="ruby-identifier">method_definition</span> = <span class="ruby-keyword kw">nil</span>
291:     <span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parameter</span><span class="ruby-operator">|</span>
292:       <span class="ruby-identifier">arg_type</span> = <span class="ruby-identifier">parameter</span>[<span class="ruby-value">0</span>]
293:       <span class="ruby-identifier">arg</span> = <span class="ruby-identifier">parameter</span>[<span class="ruby-value">1</span>]
294:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">arg_type</span>
295:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">:req</span>
296:           <span class="ruby-identifier">parameter_string</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; #{arg}&quot;</span>
297:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">:opt</span>
298:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Commandable</span>.<span class="ruby-identifier">verbose_parameters</span>
299:             <span class="ruby-comment cmt"># figure out what the default value is</span>
300:             <span class="ruby-identifier">method_definition</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">readline</span>(<span class="ruby-identifier">@@method_file</span>, <span class="ruby-identifier">@@method_line</span>)
301:             <span class="ruby-identifier">default</span> = <span class="ruby-identifier">parse_optional</span>(<span class="ruby-identifier">method_definition</span>, <span class="ruby-identifier">arg</span>)
302:             <span class="ruby-identifier">parameter_string</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; [#{arg}=#{default}]&quot;</span>
303:           <span class="ruby-keyword kw">else</span>
304:             <span class="ruby-identifier">parameter_string</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; [#{arg}]&quot;</span>
305:           <span class="ruby-keyword kw">end</span>
306:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">:rest</span>
307:           <span class="ruby-identifier">parameter_string</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; *#{arg}&quot;</span>
308:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">:block</span>
309:           <span class="ruby-identifier">parameter_string</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; &amp;#{arg}&quot;</span>
310:       <span class="ruby-keyword kw">end</span>
311:     <span class="ruby-keyword kw">end</span>
312:     <span class="ruby-identifier">parameter_string</span>.<span class="ruby-identifier">strip</span>
313:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-optional-method" class="method-detail ">
				<a name="method-i-parse_optional"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_optional</span><span
						class="method-args">(method_def, argument)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Parses a method defition for the optional values of given argument.
</p>
					

					
					<div class="method-source-code"
						id="parse-optional-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 325</span>
325:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_optional</span>(<span class="ruby-identifier">method_def</span>, <span class="ruby-identifier">argument</span>)
326:     <span class="ruby-identifier">method_def</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-node">/#{argument}\s*=\s*(&quot;[^&quot;\r\n]*&quot;|'[^'\r\n]*'|[0-9]*)/</span>)[<span class="ruby-value">0</span>][<span class="ruby-value">0</span>]
327:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="readline-method" class="method-detail ">
				<a name="method-i-readline"></a>

				<div class="method-heading">
				
					<span class="method-name">readline</span><span
						class="method-args">(file, line_number)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Reads a line from a source code file.
</p>
					

					
					<div class="method-source-code"
						id="readline-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 316</span>
316:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readline</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line_number</span>)
317:     <span class="ruby-identifier">current_line</span> = <span class="ruby-value">0</span>
318:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line_text</span><span class="ruby-operator">|</span>
319:       <span class="ruby-identifier">current_line</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
320:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">line_text</span>.<span class="ruby-identifier">strip</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_line</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">line_number</span>
321:     }
322:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="singleton-method-added-method" class="method-detail ">
				<a name="method-i-singleton_method_added"></a>

				<div class="method-heading">
				
					<span class="method-name">singleton_method_added</span><span
						class="method-args">(meth)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Trap class methods too
</p>
					

					
					<div class="method-source-code"
						id="singleton-method-added-source">
<pre>
     <span class="ruby-comment cmt"># File lib/commandable/commandable.rb, line 281</span>
281:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">singleton_method_added</span>(<span class="ruby-identifier">meth</span>)
282:     <span class="ruby-identifier">set_trace_func</span>(<span class="ruby-keyword kw">nil</span>)
283:     <span class="ruby-identifier">@@cmd_parameters</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:parameters=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">meth</span>).<span class="ruby-identifier">parameters</span>, <span class="ruby-value">:class_method=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">true</span>)
284:     <span class="ruby-identifier">add_command</span>(<span class="ruby-identifier">meth</span>)
285:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

